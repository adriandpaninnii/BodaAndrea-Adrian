<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Invitaci√≥n de Boda - RSVP</title>

  <style>
    body {
      font-family: 'Arial', sans-serif;
      text-align: center;
      background: url('10.jpg') no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 20px;
      color: #333;
    }
    h1 { font-size: 2.5em; margin-top: 30px; margin-bottom: 40px; color: #b56576; }
    .nombres { font-family: 'Playfair Display', serif; font-size: 3em; font-weight: bold; color: #2e2b2b; margin: 50px 0; position: relative; line-height: 1.6; }
    .ampersand { position: relative; display: inline-block; margin: 0 15px; }
    .corazon { position: absolute; top: -0.9em; left: 60%; transform: translateX(-50%); font-size: 1em; color: #d48a9e; }
    .simbolo { font-size: 1em; color: #b56576; }
    .section { margin: 20px auto; padding: 15px; max-width: 650px; border: 1px solid #ddd; border-radius: 12px; background: rgba(255,255,255,0.9); box-shadow: 0 2px 8px rgba(0,0,0,0.15); }
    input, textarea, select { width: 100%; max-width: 500px; padding: 10px; margin: 6px 0; border-radius: 5px; border: 1px solid #ccc; font-size: 1em; }
    button { background: #b56576; color: white; padding: 12px; width: 100%; max-width: 500px; font-size: 1em; border: none; border-radius: 8px; cursor: pointer; margin-top: 10px; }
    button:hover { background: #92465a; }
    button:disabled { background: #ccc; cursor: not-allowed; }
    .fotos { display: flex; justify-content: center; flex-wrap: wrap; gap: 15px; margin-bottom: 30px; }
    .fotos img { width: 250px; height: auto; border-radius: 12px; box-shadow: 0 4px 10px rgba(0,0,0,0.15); cursor: pointer; transition: transform 0.2s; }
    .fotos img:hover { transform: scale(1.05); }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); justify-content: center; align-items: center; }
    .modal img { max-width: 90%; max-height: 80%; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
    .close { position: absolute; top: 20px; right: 35px; color: #fff; font-size: 40px; font-weight: bold; cursor: pointer; }
    .regalos-container { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; }
    .regalo-box { flex: 1; min-width: 200px; padding: 15px; background: #e6c9d6; border-radius: 12px; box-shadow: 0 3px 8px rgba(0,0,0,0.15); }
    .countdown-container { display: flex; justify-content: center; gap: 20px; margin-top: 20px; flex-wrap: wrap; }
    .countdown-box { background: #e6c9d6; color: #2e2b2b; padding: 15px; border-radius: 12px; min-width: 80px; box-shadow: 0 3px 8px rgba(0,0,0,0.15); }
    .countdown-box span { display: block; font-size: 1.6em; font-weight: bold; }
    .countdown-box small { font-size: 0.9em; color: #5a3e47; }
    .input-group { display: flex; gap: 5px; margin-bottom: 5px; flex-wrap: wrap; justify-content: center; }
    .input-group input { flex: 1; min-width: 120px; }
    @media (max-width: 600px) { h1 { font-size: 2em; } .nombres { font-size: 2.2em; } .fotos img { width: 90%; } }
  </style>

  <!-- Librer√≠as externas -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>
  <h1>¬°Nos casamos!</h1>
  <p class="nombres">
    Adri√°n
    <span class="ampersand"><span class="corazon">üíï</span><span class="simbolo">&</span></span>
    Andrea
  </p>

  <!-- Galer√≠a -->
  <div class="fotos">
    <img src="09.jpg" alt="Foto 1">
    <img src="41.jpg" alt="Foto 2">
    <img src="29.jpg" alt="Foto 3">
  </div>

  <!-- Modal de imagen -->
  <div id="modal" class="modal">
    <span class="close">&times;</span>
    <img id="imgGrande">
  </div>

  <!-- Contador -->
  <div class="section">
    <h2>Falta para el gran d√≠a</h2>
    <p><strong>Domingo 16 / Noviembre / 2025</strong></p>
    <div id="countdown" class="countdown-container">
      <div class="countdown-box"><span id="days">0</span><small>D√≠as</small></div>
      <div class="countdown-box"><span id="hours">0</span><small>Horas</small></div>
      <div class="countdown-box"><span id="minutes">0</span><small>Minutos</small></div>
      <div class="countdown-box"><span id="seconds">0</span><small>Segundos</small></div>
    </div>
  </div>

  <!-- Ubicaciones -->
  <div class="section">
    <h2>Ceremonia Religiosa</h2>
    <p>Parroquia San Juan Bautista - 5:00 PM - 6:00 PM</p>
    <a href="https://www.google.com/maps/place/Parroquia+San+Juan+Bautista/@28.6814462,-106.0810058,17z" target="_blank">üìç Ver ubicaci√≥n</a>

    <h2>Recepci√≥n</h2>
    <p>Sal√≥n Cantabria - 9:00 PM - 02:00 AM</p>
    <a href="https://www.google.com/maps/place/Sal%C3%B3n+Cantabria/@28.6386336,-106.0031231,17z" target="_blank">üìç Ver ubicaci√≥n</a>
  </div>

  <!-- Hospedaje -->
  <div class="section">
    <h2>Hospedaje</h2>
    <div>
      <p><strong>Hotel Casa Grande</strong> - <a href="https://www.google.com/maps/place/Hotel+Casa+Grande+Chihuahua/" target="_blank">üìç Ver ubicaci√≥n</a></p>
      <p><strong>Hotel Copper Canyon Boutique</strong> - <a href="https://www.google.com/maps/place/COPPER+CANYON+BOUTIQUE+HOTEL/" target="_blank">üìç Ver ubicaci√≥n</a></p>
      <p><strong>Hotel Ibis Chihuahua</strong> - <a href="https://www.google.com/maps/place/Hotel+Ibis+Chihuahua/" target="_blank">üìç Ver ubicaci√≥n</a></p>
    </div>
  </div>

  <!-- Mesa de regalos -->
  <div class="section">
    <h2>Mesa de Regalos</h2>
    <div class="regalos-container">
      <div class="regalo-box"><h3>Amazon</h3><a href="https://www.amazon.com" target="_blank">üéÅ Ver lista</a></div>
      <div class="regalo-box"><h3>Liverpool</h3><a href="https://mesaderegalos.liverpool.com.mx/milistaderegalos/51758991" target="_blank">üéÅ Ver lista</a></div>
    </div>
  </div>

  <!-- Confirmaci√≥n -->
  <div class="section">
    <h2>Confirmar Asistencia</h2>
    <form id="rsvpForm">
      <input type="text" id="nombre" placeholder="Tu nombre completo" required>
      <div>
        <label>¬øAsistir√°s al evento?</label>
        <select id="asistira" required>
          <option value="">-- Selecciona --</option>
          <option value="si">S√≠</option>
          <option value="no">No</option>
        </select>
      </div>

      <div id="camposExtra" style="display:none; margin-top: 10px;">
        <div>
          <label>N√∫mero de acompa√±antes</label>
          <input type="number" id="acompanantes" placeholder="0" min="0">
        </div>
        <div id="listaAcompanantes" style="display:none;"><label>Acompa√±antes</label></div>

        <div>
          <label>¬øLlevan ni√±os?</label>
          <select id="tieneNinos"><option value="no">No</option><option value="si">S√≠</option></select>
        </div>

        <input type="tel" id="telefono" placeholder="Tu n√∫mero de tel√©fono">
      </div>

      <button type="submit" disabled>‚úÖ Confirmar por WhatsApp</button>
    </form>
  </div>

  <!-- Lista y export -->
  <div class="section">
    <h2>Lista de Invitados</h2>
    <p>Descarga la lista de confirmaciones (Excel)</p>
    <button onclick="exportarExcel()">üì• Descargar Excel</button>
  </div>

<script>
const eventDate = new Date("2025-11-16T21:00:00").getTime();
setInterval(() => {
  const now = Date.now();
  const distance = eventDate - now;
  if(distance>0){
    const days = Math.floor(distance/(1000*60*60*24));
    const hours = Math.floor((distance%(1000*60*60*24))/(1000*60*60));
    const minutes = Math.floor((distance%(1000*60*60))/(1000*60));
    const seconds = Math.floor((distance%(1000*60))/1000);
    document.getElementById("days").innerText=days;
    document.getElementById("hours").innerText=hours;
    document.getElementById("minutes").innerText=minutes;
    document.getElementById("seconds").innerText=seconds;
  } else {
    document.getElementById("countdown").innerHTML="<h3>¬°Hoy es el gran d√≠a! üíç</h3>";
  }
},1000);

const modal=document.getElementById("modal");
const modalImg=document.getElementById("imgGrande");
const closeBtn=document.querySelector(".close");
document.querySelectorAll(".fotos img").forEach(img=>{
  img.addEventListener("click",()=>{ modal.style.display="flex"; modalImg.src=img.src; });
});
closeBtn.addEventListener("click",()=>{ modal.style.display="none"; });
modal.addEventListener("click",(e)=>{ if(e.target===modal) modal.style.display="none"; });

let invitados=[];
const listaAcompanantes=document.getElementById("listaAcompanantes");
const asistira=document.getElementById("asistira");
const camposExtra=document.getElementById("camposExtra");
const tieneNinos=document.getElementById("tieneNinos");
const btnEnviar=document.querySelector("#rsvpForm button[type='submit']");

// Mostrar campos seg√∫n asistencia
asistira.addEventListener("change",function(){
  if(this.value==="si"){
    camposExtra.style.display="block";
    document.getElementById("acompanantes").required=true;
    document.getElementById("telefono").required=true;
  } else {
    camposExtra.style.display="none";
    document.getElementById("acompanantes").required=false;
    document.getElementById("telefono").required=false;
    document.getElementById("acompanantes").value="";
    document.getElementById("tieneNinos").value="no";
    listaAcompanantes.innerHTML="";
    listaAcompanantes.style.display="none";
  }
});

// Generar campos de acompa√±antes
document.getElementById("acompanantes").addEventListener("input",function(){
  const cantidad=parseInt(this.value)||0;
  listaAcompanantes.innerHTML="";
  if(cantidad>0){
    listaAcompanantes.style.display="block";
    for(let i=0;i<cantidad;i++){
      const div=document.createElement("div");
      div.classList.add("input-group");
      div.innerHTML=`
        <input type="text" class="acompanante" placeholder="Nombre acompa√±ante">
        <label style="display:none;">Lleva ni√±o? <input type="checkbox" class="llevaNino"></label>
        <input type="text" class="edadNinoAcompanante" placeholder="Edad del ni√±o" style="display:none; width:100px;">
        <button type="button" class="eliminarCampo">‚úñ</button>
      `;
      listaAcompanantes.appendChild(div);
      const checkbox=div.querySelector(".llevaNino");
      const label=div.querySelector("label");
      const edadInput=div.querySelector(".edadNinoAcompanante");
      if(tieneNinos.value==="si") label.style.display="inline";
      checkbox.addEventListener("change",function(){
        if(this.checked){ edadInput.style.display="inline"; }
        else { edadInput.style.display="none"; edadInput.value=""; }
        validarCamposNinos();
      });
    }
  } else listaAcompanantes.style.display="none";
  validarCamposNinos();
});

// Validaci√≥n de campos de ni√±os en acompa√±antes
function validarCamposNinos(){
  let valid=true;
  document.querySelectorAll(".acompanante").forEach(divInput=>{
    const div=divInput.parentElement;
    const checkbox=div.querySelector(".llevaNino");
    const edadInput=div.querySelector(".edadNinoAcompanante");
    if(checkbox.checked && edadInput.value.trim()==="") valid=false;
  });
  btnEnviar.disabled=!valid;
}
document.addEventListener("input",validarCamposNinos);
document.addEventListener("change",validarCamposNinos);
validarCamposNinos();

// Mostrar/ocultar checkboxes seg√∫n si llevar√° ni√±os
tieneNinos.addEventListener("change",function(){
  listaAcompanantes.querySelectorAll("label").forEach(label=>{
    label.style.display=(this.value==="si")?"inline":"none";
    label.querySelector("input").checked=false;
    label.nextElementSibling.value="";
  });
});

// Eliminar campos
document.addEventListener("click",function(e){
  if(e.target.classList.contains("eliminarCampo")){
    e.preventDefault();
    e.target.parentElement.remove();
    validarCamposNinos();
  }
});

// Env√≠o de formulario (modificado)
document.getElementById("rsvpForm").addEventListener("submit",function(e){
  e.preventDefault();
  const nombre=document.getElementById("nombre").value.trim();
  const telefono=document.getElementById("telefono").value.trim();
  const respuesta=asistira.value;

  // Agregar invitado principal
  invitados.push({
    Nombre:nombre,
    Tipo:"Adulto",
    Asistira:respuesta,
    Relacion:"Principal",
    Edad:"",
    Telefono:telefono
  });

  // Procesar acompa√±antes
  Array.from(document.querySelectorAll(".acompanante")).forEach(i=>{
    const div=i.parentElement;
    const llevaNino=div.querySelector(".llevaNino").checked;
    const edadNino=div.querySelector(".edadNinoAcompanante").value.trim();

    if(llevaNino && edadNino){
      // Si el acompa√±ante tiene ni√±o, lo registramos como ni√±o
      invitados.push({
        Nombre:i.value.trim()+" - Ni√±o: "+edadNino,
        Tipo:"Ni√±o",
        Asistira:"si",
        Relacion:"Ni√±o de "+nombre,
        Edad:edadNino,
        Telefono:telefono
      });
    } else {
      // Si no lleva ni√±o, lo registramos como acompa√±ante adulto
      invitados.push({
        Nombre:i.value.trim(),
        Tipo:"Adulto",
        Asistira:"si",
        Relacion:"Acompa√±ante de "+nombre,
        Edad:"",
        Telefono:telefono
      });
    }
  });

  // Construir mensaje WhatsApp
  let mensaje=`üìã Confirmaci√≥n de asistencia\nüë§ Nombre: ${nombre}\n`;
  mensaje+=respuesta==="si"?"‚úÖ Asistir√°: S√≠\n":"‚ùå Asistir√°: No\n";

  const acompa√±antesMsg=Array.from(document.querySelectorAll(".acompanante")).map(i=>{
    const div=i.parentElement;
    const llevaNino=div.querySelector(".llevaNino").checked;
    const edadNino=div.querySelector(".edadNinoAcompanante").value.trim();
    return llevaNino && edadNino ? `${i.value} (Ni√±o: ${edadNino})` : i.value;
  });
  if(acompa√±antesMsg.length) mensaje+=`üë• Acompa√±antes: ${acompa√±antesMsg.join(", ")}\n`;

  if(telefono) mensaje+=`üì± Tel√©fono: ${telefono}\n`;

  window.open(`https://wa.me/?text=${encodeURIComponent(mensaje)}`,"_blank");

  this.reset();
  camposExtra.style.display="none";
  listaAcompanantes.innerHTML="";
  listaAcompanantes.style.display="none";
  validarCamposNinos();
  alert("‚úÖ Tu confirmaci√≥n ha sido registrada.");
});

// Exportar Excel
function exportarExcel(){
  if(invitados.length===0){ alert("‚ö†Ô∏è No hay confirmaciones registradas todav√≠a."); return; }
  const hoja=XLSX.utils.json_to_sheet(invitados);
  const libro=XLSX.utils.book_new();
  XLSX.utils.book_append_sheet(libro,hoja,"Confirmaciones");
  const archivoExcel=XLSX.write(libro,{bookType:"xlsx",type:"array"});
  saveAs(new Blob([archivoExcel],{type:"application/octet-stream"}),"Confirmaciones_Boda.xlsx");
}
</script>
</body>
</html>
